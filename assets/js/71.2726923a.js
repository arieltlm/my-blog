(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{475:function(a,s,n){"use strict";n.r(s);var e=n(14),t=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"npm相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm相关"}},[a._v("#")]),a._v(" npm相关")]),a._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#npm相关"}},[a._v("npm相关")]),s("ul",[s("li",[s("a",{attrs:{href:"#npm篇"}},[a._v("npm篇")]),s("ul",[s("li",[s("a",{attrs:{href:"#修改npm的源"}},[a._v("修改npm的源")])]),s("li",[s("a",{attrs:{href:"#临时使用"}},[a._v("临时使用")])]),s("li",[s("a",{attrs:{href:"#使用cnpm命令代替npm"}},[a._v("使用cnpm命令代替npm")])]),s("li",[s("a",{attrs:{href:"#修改npm配置文件"}},[a._v("修改npm配置文件")])])])]),s("li",[s("a",{attrs:{href:"#nrm篇"}},[a._v("nrm篇")]),s("ul",[s("li",[s("a",{attrs:{href:"#安装"}},[a._v("安装：")])]),s("li",[s("a",{attrs:{href:"#展示所有npm源"}},[a._v("展示所有npm源")])]),s("li",[s("a",{attrs:{href:"#当前源"}},[a._v("当前源：")])]),s("li",[s("a",{attrs:{href:"#切换源"}},[a._v("切换源")])]),s("li",[s("a",{attrs:{href:"#增加源"}},[a._v("增加源")])])])]),s("li",[s("a",{attrs:{href:"#npx篇"}},[a._v("npx篇")]),s("ul",[s("li",[s("a",{attrs:{href:"#介绍"}},[a._v("介绍")])]),s("li",[s("a",{attrs:{href:"#主要特点"}},[a._v("主要特点：")])])])]),s("li",[s("a",{attrs:{href:"#node篇"}},[a._v("node篇")]),s("ul",[s("li",[s("a",{attrs:{href:"#node管理模版n"}},[a._v("node管理模版n")])]),s("li",[s("a",{attrs:{href:"#升级node版本"}},[a._v("升级node版本")])])])]),s("li",[s("a",{attrs:{href:"#nvm篇"}},[a._v("nvm篇")])]),s("li",[s("a",{attrs:{href:"#pnpm"}},[a._v("pnpm")])])])])])]),s("p"),a._v(" "),s("h2",{attrs:{id:"npm篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm篇"}},[a._v("#")]),a._v(" npm篇")]),a._v(" "),s("h3",{attrs:{id:"修改npm的源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改npm的源"}},[a._v("#")]),a._v(" 修改npm的源")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("//设置淘宝源\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" config "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" registry https://registry.npm.taobao.org\n\n//设置公司的源\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" config "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" registry http://127.0.0.1:4873\n\n//查看源，可以看到设置过的所有的源\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" config get registry\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("h3",{attrs:{id:"临时使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#临时使用"}},[a._v("#")]),a._v(" 临时使用")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("//本次从淘宝仓库源下载\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--registry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https://registry.npm.taobao.org "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"使用cnpm命令代替npm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用cnpm命令代替npm"}},[a._v("#")]),a._v(" 使用cnpm命令代替npm")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("// 安装cnpm命令,不会改变npm的源\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" cnpm "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--registry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https://registry.npm.taobao.org\n\n//使用\ncnpm "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h3",{attrs:{id:"修改npm配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改npm配置文件"}},[a._v("#")]),a._v(" 修改npm配置文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("// 编辑 ~/.npmrc 加入下面内容\nregistry "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" https://registry.npm.taobao.org\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"nrm篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nrm篇"}},[a._v("#")]),a._v(" nrm篇")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/wangmeijian/p/7072053.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("用nrm一键切换npm源"),s("OutboundLink")],1)]),a._v(" "),s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" nrm "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--save")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"展示所有npm源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#展示所有npm源"}},[a._v("#")]),a._v(" 展示所有npm源")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nrm "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("  npm ---- https://registry.npmjs.org/\n  cnpm --- http://r.cnpmjs.org/\n* taobao - https://registry.npm.taobao.org/\n  nj ----- https://registry.nodejitsu.com/\n  npmMirror  https://skimdb.npmjs.com/registry/\n  edunpm - http://registry.enpmjs.org/\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("h3",{attrs:{id:"当前源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#当前源"}},[a._v("#")]),a._v(" 当前源：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nrm current\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"切换源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#切换源"}},[a._v("#")]),a._v(" 切换源")]),a._v(" "),s("p",[a._v("http://r.cnpmjs.org/，命令：nrm use 源的别名，即")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nrm use cnpm\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"增加源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#增加源"}},[a._v("#")]),a._v(" 增加源")]),a._v(" "),s("p",[a._v("用nrm add 命令添加公司私有npm源，如http://registry.npm.360.org(随便写的)，起个别名叫qihoo")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nrm "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" qihoo http://registry.npm.360.org\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"npx篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npx篇"}},[a._v("#")]),a._v(" npx篇")]),a._v(" "),s("h3",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[a._v("#")]),a._v(" 介绍")]),a._v(" "),s("p",[a._v("npm v5.2.0引入的一条命令（npx），引入这个命令的目的是为了提升开发者使用包内提供的命令行工具的体验。")]),a._v(" "),s("p",[a._v("举例：使用"),s("code",[a._v("create-react-app")]),a._v("创建一个react项目。\n老方法：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" create-react-app\ncreate-react-app my-app\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("npx方式：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("npx create-react-app my-app\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("这条命令会临时安装 create-react-app 包，命令完成后create-react-app 会删掉，不会出现在 global 中。下次再执行，还是会重新临时安装。\nnpx 会帮你执行依赖包里的二进制文件。\n举例来说，之前我们可能会写这样的命令：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v(" webpack\n./node_modules/.bin/webpack "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("如果你对 bash 比较熟，可能会写成这样：\nnpm i -D webpack\n"),s("code",[a._v("npm bin")]),a._v("/webpack -v")]),a._v(" "),s("p",[a._v("有了 npx，你只需要这样：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v(" webpack\nnpx webpack "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("也就是说 npx 会自动查找当前依赖包中的可执行文件，如果找不到，就会去 PATH 里找。如果依然找不到，就会帮你安装！\nnpx 甚至支持运行远程仓库的可执行文件：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("npx github:piuccio/cowsay hello\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("再比如 npx http-server 可以一句话帮你开启一个静态服务器！（第一次运行会稍微慢一些）")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("npx http-server\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("指定node版本来运行npm scripts：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("npx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" node@8 "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run build\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"主要特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主要特点"}},[a._v("#")]),a._v(" 主要特点：")]),a._v(" "),s("ul",[s("li",[a._v("1、临时安装可执行依赖包，不用全局安装，不用担心长期的污染。")]),a._v(" "),s("li",[a._v("2、可以执行依赖包中的命令，安装完成自动运行。")]),a._v(" "),s("li",[a._v("3、自动加载node_modules中依赖包，不用指定$PATH。")]),a._v(" "),s("li",[a._v("4、可以指定node版本、命令的版本，解决了不同项目使用不同版本的命令的问题。")])]),a._v(" "),s("p",[a._v("链接：https://www.jianshu.com/p/cee806439865")]),a._v(" "),s("h2",{attrs:{id:"node篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node篇"}},[a._v("#")]),a._v(" node篇")]),a._v(" "),s("h3",{attrs:{id:"node管理模版n"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node管理模版n"}},[a._v("#")]),a._v(" node管理模版n")]),a._v(" "),s("p",[a._v("首先，你得用npm全局安装一个管理node版本的管理模板n，对就是"),s("a",{attrs:{href:"https://github.com/tj/n",target:"_blank",rel:"noopener noreferrer"}},[a._v("n"),s("OutboundLink")],1)]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"升级node版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#升级node版本"}},[a._v("#")]),a._v(" 升级node版本")]),a._v(" "),s("p",[a._v("管理板块n的命令有很多")]),a._v(" "),s("ul",[s("li",[a._v("升级到指定的版本")])]),a._v(" "),s("p",[s("code",[a._v("n 版本号 如 n 10.0.0")])]),a._v(" "),s("ul",[s("li",[a._v("安装最新的版本")])]),a._v(" "),s("p",[s("code",[a._v("n latest")])]),a._v(" "),s("ul",[s("li",[a._v("安装最近的稳定版本")])]),a._v(" "),s("p",[s("code",[a._v("sudo n stable")])]),a._v(" "),s("blockquote",[s("p",[a._v("2022-8-8 升级了node，nvm list显示不出来最新的版本，又使用"),s("code",[a._v("nvm install 版本号")]),a._v("才装好了")])]),a._v(" "),s("h2",{attrs:{id:"nvm篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nvm篇"}},[a._v("#")]),a._v(" nvm篇")]),a._v(" "),s("ul",[s("li",[a._v("列举node版本 "),s("code",[a._v("nvm list")])]),a._v(" "),s("li",[a._v("安装某个node版本 "),s("code",[a._v("nvm install 11.13.0")])]),a._v(" "),s("li",[a._v("使用某个版本 "),s("code",[a._v("nvm use 11.13.0")])]),a._v(" "),s("li",[a._v("卸载 "),s("code",[a._v("nvm uninstall 11.13.0")])])]),a._v(" "),s("h2",{attrs:{id:"pnpm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pnpm"}},[a._v("#")]),a._v(" pnpm")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/snowball_li/article/details/124787870",target:"_blank",rel:"noopener noreferrer"}},[a._v("pnpm：简介"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.jianshu.com/p/a805e182798f",target:"_blank",rel:"noopener noreferrer"}},[a._v("什么是 PNPM？"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("pnpm和npm/yarn一样都是包管理器，相对二者来说更具优势——磁盘利用率更高，包安装速度更快，支持monorepo、安全性高")]),a._v(" "),s("p",[a._v("存储管理——按内容寻址，symlink（软链接）；")]),a._v(" "),s("p",[s("strong",[a._v("安全性")]),a._v("：\n之前在使用 npm/yarn 的时候，由于 node_module 的扁平结构，如果 A 依赖 B， B 依赖 C，那么 A 当中是可以直接使用 C 的，但问题是 A 当中并没有声明 C 这个依赖。因此会出现这种非法访问的情况。 但 pnpm 自创了一套依赖管理方式，很好地解决了这个问题，保证了安全性")]),a._v(" "),s("p",[s("strong",[a._v("依赖管理：")]),a._v("\nnpm1、npm2采用递归管理，npm3、npm3+、yarn依赖扁平化管理消除依赖提升。")]),a._v(" "),s("p",[a._v("pnpm依赖策略：消除依赖提升、规范拓扑结构")]),a._v(" "),s("p",[a._v("node_modules的历史：")]),a._v(" "),s("ul",[s("li",[a._v("npm@3 之前版本：依赖层级多，相同包在不同的依赖项中需要时，会存在多个相同副本")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("node_modules\n└─ foo\n   ├─ index.js\n   ├─ package.json\n   └─ node_modules\n      └─ bar\n         ├─ index.js\n         └─ package.json\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("ul",[s("li",[a._v("npm@3 版本：扁平化依赖结构，扁平化算法本身的复杂性很高，耗时较长；项目中仍然可以非法访问没有声明过依赖的包")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("node_modules\n├─ foo\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  ├─ index.js\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  └─ package.json\n└─ bar\n   ├─ index.js\n   └─ package.json\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("p",[a._v("依赖结构的不确定问题，也是 lock 文件诞生的原因，无论是package-lock.json(npm 5.x才出现)还是yarn.lock，都是为了保证 install 之后都产生确定的node_modules结构")]),a._v(" "),s("ul",[s("li",[a._v("pnpm:硬链+软链;只有真正在依赖项中（package.json dependences）的包才能访问")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("node_modules\n├─ .pnpm\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  ├─ foo@1.0.0/node_modules/foo\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  └─ index.js\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("  └─ bar@2.0.0/node_modules/bar\n├─ foo -"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" .pnpm/foo@1.0.0/node_modules/foo\n└─ bar -"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" .pnpm/bar@2.0.0/node_modules/bar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);