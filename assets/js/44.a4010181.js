(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{344:function(t,e,a){t.exports=a.p+"assets/img/broswer-cache.7b8229b8.png"},457:function(t,e,a){"use strict";a.r(e);var r=a(14),s=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"浏览器缓存机制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存机制"}},[t._v("#")]),t._v(" 浏览器缓存机制")]),t._v(" "),e("blockquote",[e("p",[t._v("20191205")])]),t._v(" "),e("p",[e("strong",[t._v("文章内容详细查看博客园上早期学习的："),e("a",{attrs:{href:"https://www.cnblogs.com/gtlm/p/7797743.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("缓存机制的理解"),e("OutboundLink")],1)])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://segmentfault.com/q/1010000004200644",target:"_blank",rel:"noopener noreferrer"}},[t._v("为什么有了etag还需要last-modified?"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("img",{attrs:{src:a(344),alt:"浏览器缓存机制"}})]),t._v(" "),e("h2",{attrs:{id:"强制缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#强制缓存"}},[t._v("#")]),t._v(" 强制缓存")]),t._v(" "),e("blockquote",[e("p",[t._v("服务器通知浏览器一个缓存时间，在缓存时间内，下次请求，直接用缓存，不在时间内，执行比较缓存策略。")])]),t._v(" "),e("h3",{attrs:{id:"expires"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#expires"}},[t._v("#")]),t._v(" Expires")]),t._v(" "),e("ul",[e("li",[t._v("HTTP1.0")]),t._v(" "),e("li",[t._v("缺点：服务器和客户端时间不一致，导致不精确")]),t._v(" "),e("li",[t._v("服务器返回过期时间")])]),t._v(" "),e("h3",{attrs:{id:"cache-control"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cache-control"}},[t._v("#")]),t._v(" Cache-control")]),t._v(" "),e("ul",[e("li",[t._v("private:  客户端可以缓存")]),t._v(" "),e("li",[t._v("public:   客户端和代理服务器都可缓存（前端的同学，可以认为public和private是一样的）")]),t._v(" "),e("li",[t._v("max-age=xxx:   缓存的内容将在 xxx 秒后失效")]),t._v(" "),e("li",[t._v("no-cache:    需要使用协商缓存来验证缓存数据")]),t._v(" "),e("li",[t._v("no-store:   所有内容都不会缓存，强制缓存，协商缓存都不会触发（对于前端开发来说，缓存越多越好，so...基本上和它说886）")])]),t._v(" "),e("h2",{attrs:{id:"协商缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#协商缓存"}},[t._v("#")]),t._v(" 协商缓存")]),t._v(" "),e("blockquote",[e("p",[t._v("将缓存信息中的Etag和Last-Modified通过请求发送给服务器，由服务器校验，返回304状态码时，浏览器直接使用缓存。")])]),t._v(" "),e("h3",{attrs:{id:"last-modified-if-modified-since"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#last-modified-if-modified-since"}},[t._v("#")]),t._v(" Last-Modified  /  If-Modified-Since")]),t._v(" "),e("ul",[e("li",[t._v("服务器返回Last-Modified：时间（Fri, 03 Apr 2020 06:57:08 GMT)")]),t._v(" "),e("li",[t._v("客户端请求时带上if-m-s：时间;服务器与资源最后时间对比;有改动：200+资源\n无改动：304（去缓存中取）")])]),t._v(" "),e("h3",{attrs:{id:"etag-if-none-match"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#etag-if-none-match"}},[t._v("#")]),t._v(" Etag  /  If-None-Match")]),t._v(" "),e("ul",[e("li",[t._v("优先级高于last-modified")]),t._v(" "),e("li",[t._v("服务器返回Etag:标识符（哈希/某算法生成"),e("code",[t._v('[W/"134308-1585897028000"]')]),t._v(")")]),t._v(" "),e("li",[t._v("客户端请求时带上If-None-Match:标识符\n与被请求资源的唯一标识进行比对;\n有改动：200+资源;\n无改动：304（去缓存中取）")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://juejin.im/post/5c136bd16fb9a049d37efc47",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端缓存最佳实践"),e("OutboundLink")],1),t._v("分别指出了强制缓存和协商缓存的问题，并给出了一些最佳缓存实践，可学习；")])])}),[],!1,null,null,null);e.default=s.exports}}]);