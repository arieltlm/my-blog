(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{451:function(s,a,e){"use strict";e.r(a);var t=e(14),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"babel走一遍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel走一遍"}},[s._v("#")]),s._v(" babel走一遍")]),s._v(" "),a("blockquote",[a("p",[s._v("20200405")])]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#babel走一遍"}},[s._v("babel走一遍")]),a("ul",[a("li",[a("a",{attrs:{href:"#_1-快速生成一个简单的es6代码运行环境"}},[s._v("1.快速生成一个简单的ES6代码运行环境")])]),a("li",[a("a",{attrs:{href:"#【扩展运动】"}},[s._v("【扩展运动】")]),a("ul",[a("li",[a("a",{attrs:{href:"#_1-转码规则"}},[s._v("1). 转码规则")])]),a("li",[a("a",{attrs:{href:"#_2-babel基本用法"}},[s._v("2). babel基本用法")])]),a("li",[a("a",{attrs:{href:"#_3-在package-json中配置"}},[s._v("3). 在package.json中配置")])]),a("li",[a("a",{attrs:{href:"#_4-babel-core"}},[s._v("4). babel-core")])]),a("li",[a("a",{attrs:{href:"#_5-babel-polyfill"}},[s._v("5).babel-polyfill")])])])]),a("li",[a("a",{attrs:{href:"#_3-升级babel7"}},[s._v("3.升级babel7")]),a("ul",[a("li",[a("a",{attrs:{href:"#升级遇到问题"}},[s._v("升级遇到问题")])])])])])]),a("li",[a("a",{attrs:{href:"#记录"}},[s._v("记录")])])])]),a("p"),s._v(" "),a("blockquote",[a("p",[s._v("写在之前：\n之前对这块也是掌握了一些，但是总感觉不是那么的清晰通透，这次很神奇的为了验证ES2020的代码然后从"),a("code",[s._v("babel6.x")]),s._v("的知识点开始，搜索babel-node为何本地不能使用，然后快速生成了一个简单的ES6代码运行环境，接着理解了"),a("code",[s._v("babel")]),s._v(","),a("code",[s._v("babel-node")]),s._v("，然后接着测试ES2020代码的时候，又发现这些插件必须要babel7，然后进行全面升级，又仔细看了babel官网。最后想总结一句————还是应该仔细研读官网，写的非常仔细和全面。")])]),s._v(" "),a("blockquote",[a("p",[s._v("这块实践代码在"),a("a",{attrs:{href:"https://github.com/arieltlm/basic-practice/tree/master/es6/es-test",target:"_blank",rel:"noopener noreferrer"}},[s._v("github es6"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"_1-快速生成一个简单的es6代码运行环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-快速生成一个简单的es6代码运行环境"}},[s._v("#")]),s._v(" 1.快速生成一个简单的ES6代码运行环境")]),s._v(" "),a("p",[s._v("项目中局部安装babel-cli（注意在之前最好执行一下npm init -y）\n安装了bable-cli后，.node_modules/.bin下面就有可执行的babel转码工具和babel-node工具;")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("（babel-node 工具提供了一个支持 ES6 的 REPL 交互式运行环境。在此环境中，我们可以做一些简单的代码调试）")])]),s._v(" "),a("li",[a("p",[s._v("（babel工具可以进行将es6代码转成es5标准输出）")])])]),s._v(" "),a("p",[s._v("此时还需要在根目标下添加.babelrc文件,该文件用来设置转码规则和插件：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("不安装转码规则之前，ES6语法无法运行:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 局部安装执行：")]),s._v("\n$ ./node_modules/.bin/babel-node     \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" const a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局安装过的话：")]),s._v("\n$ babel-node\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" const a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 得到结果--报语法错误")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("SyntaxError: repl: Only "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("var"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" variables are supported "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the REPL\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" const a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("在项目中安装转码规则："),a("code",[s._v("npm install babel-preset-es2015")])]),s._v(" "),a("p",[s._v("同时在.babelrc中添加：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"es2015"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("此时代码可执行了；")]),s._v(" "),a("p",[s._v("可以直接执行"),a("code",[s._v("babel-node d.js")]),s._v(",此时其中的"),a("code",[s._v("import")]),s._v("不会报错")]),s._v(" "),a("p",[s._v("此时最简单的es6代码调试环境已经安装完毕;")]),s._v(" "),a("h2",{attrs:{id:"【扩展运动】"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#【扩展运动】"}},[s._v("#")]),s._v(" 【扩展运动】")]),s._v(" "),a("h3",{attrs:{id:"_1-转码规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-转码规则"}},[s._v("#")]),s._v(" 1). 转码规则")]),s._v(" "),a("ul",[a("li",[s._v("ES6转码规则："),a("code",[s._v("npm install --save-dev babel-preset-es2015")])]),s._v(" "),a("li",[s._v("react转码规则: "),a("code",[s._v("npm install --save-dev babel-preset-react")])]),s._v(" "),a("li",[s._v("ES7不同阶段语法提案的转码规则（共有4个阶段），选装一个: "),a("code",[s._v("babel-preset-stage-0, babel-preset-stage-1, babel-preset-stage-2, babel-preset-stage-3")])])]),s._v(" "),a("p",[s._v("安装了转码规则之后，"),a("code",[s._v(".babelrc")]),s._v("需要更新：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"es2015"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"react"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stage-3"')]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"_2-babel基本用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-babel基本用法"}},[s._v("#")]),s._v(" 2). babel基本用法")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转码结果输出到标准输出")]),s._v("\n$ babel example.js\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转码结果写入一个文件 (--out-file 或 -o 参数指定输出文件)")]),s._v("\n$ babel example.js --out-file compiled.js\n或者\n$ babel example.js "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" compiled.js\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 整个目录转码 (--out-dir 或 -d 参数指定输出目录)")]),s._v("\n$ babel src --out-dir lib\n或者\n$ babel src "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" lib\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -s 参数生成source map文件")]),s._v("\n$ babel src "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" lib "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h3",{attrs:{id:"_3-在package-json中配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-在package-json中配置"}},[s._v("#")]),s._v(" 3). 在package.json中配置")]),s._v(" "),a("p",[s._v("script 启动程序,简化开发")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"start"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel demo.js --out-file bunder.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel src -d lib"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"babel-node d.js"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"_4-babel-core"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-babel-core"}},[s._v("#")]),s._v(" 4). "),a("code",[s._v("babel-core")])]),s._v(" "),a("p",[s._v("如果某些代码需要调用Babel的API进行转码，就要使用"),a("code",[s._v("babel-core")]),s._v("模块")]),s._v(" "),a("h3",{attrs:{id:"_5-babel-polyfill"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-babel-polyfill"}},[s._v("#")]),s._v(" 5)."),a("code",[s._v("babel-polyfill")])]),s._v(" "),a("p",[s._v("Babel默认只转换新的JavaScript句法（syntax），而不转换新的API，比如Iterator、Generator、Set、Maps、Proxy、Reflect、Symbol、Promise等全局对象，以及一些定义在全局对象上的方法（比如Object.assign）都不会转码。")]),s._v(" "),a("p",[s._v("举例来说，ES6在Array对象上新增了Array.from方法。Babel就不会转码这个方法。如果想让这个方法运行，必须使用babel-polyfill，为当前环境提供一个垫片。")]),s._v(" "),a("p",[a("strong",[s._v("知识来源")]),s._v(" "),a("a",{attrs:{href:"https://www.jianshu.com/p/5c509e4473c2",target:"_blank",rel:"noopener noreferrer"}},[s._v("[Babel]代码转码器的使用说明"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://www.jianshu.com/p/74b0e2014735",target:"_blank",rel:"noopener noreferrer"}},[s._v("ES6环境搭建(Node & babel)"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://www.jianshu.com/p/875765efe686",target:"_blank",rel:"noopener noreferrer"}},[s._v("说说 Babel 的 babel-node 工具"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://segmentfault.com/q/1010000016459717",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装了babel-cli之后不能够使用babel-node？"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"_3-升级babel7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-升级babel7"}},[s._v("#")]),s._v(" 3.升级babel7")]),s._v(" "),a("p",[s._v("新版本的Babel7中对官方提供的依赖使用了命名空间"),a("code",[s._v("@babel")]),s._v("；\n所以之后的都需要安装为"),a("code",[s._v("@babel/cli")]),s._v(","),a("code",[s._v("@babel/preset-env")]),s._v("，"),a("code",[s._v("@babel/preset-react")]),s._v("等等，"),a("code",[s._v("@babel/node")]),s._v("需要自行安装了。")]),s._v(" "),a("p",[s._v("目前出来的转化插件都需要Babel7才可用")]),s._v(" "),a("p",[s._v("具体可以查看"),a("a",{attrs:{href:"https://www.babeljs.cn/docs/",target:"_blank",rel:"noopener noreferrer"}},[s._v("babel文档（官方）"),a("OutboundLink")],1),s._v("；")]),s._v(" "),a("p",[s._v("转化插件可查看"),a("a",{attrs:{href:"https://www.babeljs.cn/docs/plugins",target:"_blank",rel:"noopener noreferrer"}},[s._v("babel插件列表（官方）"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("实际使用详细查看官网"),a("a",{attrs:{href:"https://www.babeljs.cn/docs/usage",target:"_blank",rel:"noopener noreferrer"}},[s._v("Usage Guide"),a("OutboundLink")],1),s._v(":")]),s._v(" "),a("ul",[a("li",[s._v("最基础安装下面几个包：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-dev @babel/core @babel/cli @babel/preset-env\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--save")]),s._v(" @babel/polyfill\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("将src下面的文件都转码输出到lib下")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("./node_modules/.bin/babel src --out-dir lib\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("还可以增加插件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("./node_modules/.bin/babel src --out-dir lib "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("@babel/plugin-transform-arrow-functions\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("原文：Just like with plugins, you can create your own presets too to share any combination of plugins you need. For our use case here, there's an excellent preset named env")]),s._v(" "),a("p",[s._v("就如同插件那样，可以配置很多个preset组合起来用，此次就有一个很棒的包"),a("code",[s._v("@babel/preset-env")]),s._v(",不再需要像之前那样，增加es7各个阶段的、"),a("code",[s._v("babel-preset-react")]),s._v("、"),a("code",[s._v("babel-preset-2015")]),s._v("，只需要一个"),a("code",[s._v("preset-env")]),s._v("即可")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("./node_modules/.bin/babel src --out-dir lib "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--presets")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("@babel/env\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("原文：Without any configuration, this preset will include all plugins to support modern JavaScript (ES2015, ES2016, etc.). But presets can take options too. Rather than passing both cli and preset options from the terminal, let's look at another way of passing options: configuration files.")])]),s._v(" "),a("ul",[a("li",[s._v("配置文件babel.config.json")])]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.babeljs.cn/docs/configuration",target:"_blank",rel:"noopener noreferrer"}},[s._v("Configure Babel"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"targets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"edge"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"17"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"firefox"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"60"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"chrome"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"67"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"safari"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"11.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"useBuiltIns"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"usage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("blockquote",[a("p",[s._v("原文：Now the env preset will only load transformation plugins for features that are not available in our target browsers. We're all set for syntax.")])]),s._v(" "),a("p",[a("code",[s._v("target")]),s._v("对象里面配置了各个浏览器的支持+;")]),s._v(" "),a("p",[a("code",[s._v("useBuiltIns")]),s._v("设置成"),a("code",[s._v("usage")]),s._v("时，polyfill垫片会自动调整只使用以上浏览器环境的转化即可，不做多余的")]),s._v(" "),a("blockquote",[a("p",[s._v('原文：Now luckily for us, we\'re using the env preset which has a "useBuiltIns" option that when set to "usage" will practically apply the last optimization mentioned above where you only include the polyfills you need.')])]),s._v(" "),a("h3",{attrs:{id:"升级遇到问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级遇到问题"}},[s._v("#")]),s._v(" 升级遇到问题")]),s._v(" "),a("ul",[a("li",[s._v("preset-env\n`Error: Cannot find module 'babel-preset-preset-env' from '/Users/tlm/Documents/web-front/test/keep-study/es6-test/test1'")])]),s._v(" "),a("ul",[a("li",[s._v('Did you mean "@babel/preset-env"?`')])]),s._v(" "),a("p",[s._v("参考"),a("a",{attrs:{href:"https://blog.csdn.net/weixin_43190355/article/details/100329605",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack报错：Module build failed (***): Error: Cannot find module 'babel-preset-env' from '***"),a("OutboundLink")],1),s._v("将"),a("code",[s._v(".babelrc")]),s._v("更改：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h1",{attrs:{id:"记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#记录"}},[s._v("#")]),s._v(" 记录")]),s._v(" "),a("p",[s._v("我在全局安装了"),a("code",[s._v("@babel/core")]),s._v("和"),a("code",[s._v("@babel/node")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" @babel/core "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--global")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" @babel/node "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--global")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("然后在控制台可直接执行：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ babel-node src/dynamic-import/index.js\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);